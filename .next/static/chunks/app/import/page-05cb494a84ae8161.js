(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[649],{32762:function(e,a,t){Promise.resolve().then(t.bind(t,17407))},3903:function(e,a,t){"use strict";t.d(a,{V:function(){return i},default:function(){return n}});var s=t(57437),r=t(2265),l=t(16463),c=t(39776);t(76735),t(67059),t(3602),c.Z.apps.length||c.Z.initializeApp({apiKey:"AIzaSyD-X5xUcfYr66Ex15yEHtaTdsbpKjqUSq4",authDomain:"advice-class.firebaseapp.com",projectId:"advice-class",storageBucket:"advice-class.appspot.com",messagingSenderId:"1090594139995",appId:"1:1090594139995:web:bb6bdc4ddea0eca557f47e",measurementId:"G-7PR3RWRWTD"});var o=c.Z;let i=(0,r.createContext)({});var n=function(e){let{children:a}=e,t=(0,l.useRouter)(),[c,n]=(0,r.useState)(null),[d,m]=(0,r.useState)(!1),[u,f]=(0,r.useState)(!0);async function h(e,a){m(!0);try{let{uid:s,email:r}=(await o.auth().signInWithEmailAndPassword(e,a)).user,l={uid:s,email:r};n(l),p(l),m(!1),t.push("/desktop")}catch(e){console.log(e),m(!1)}}async function p(e){localStorage.setItem("SistemaUser",JSON.stringify(e))}async function x(){await o.auth().signOut(),localStorage.removeItem("SistemaUser"),n(null),t.push("/")}return(0,r.useEffect)(()=>{!function(){let e=localStorage.getItem("SistemaUser");e&&n(JSON.parse(e)),f(!1)}()},[]),(0,s.jsx)(i.Provider,{value:{signed:!!c,user:c,loading:u,signIn:h,signOut:x,loadingAuth:d},children:a})}},17407:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return m}});var s=t(57437);t(66648);var r=t(2265),l=t(3903),c=t(88924),o=()=>{let e=async()=>{if(window.confirm("Voc\xea realmente quer apagar o arquivo escola.db?"))try{let e=await fetch("/api/upload",{method:"DELETE"}),a=await e.json();a.success?alert("Arquivo escola.db deletado com sucesso!"):alert("Falha ao deletar o arquivo: ".concat(a.message))}catch(e){console.error("Erro ao deletar o arquivo:",e),alert("Ocorreu um erro ao tentar deletar o arquivo.")}};return(0,s.jsx)("div",{children:(0,s.jsx)(c.ZP,{style:{backgroundColor:"#bf0606",color:"#fff"},onClick:e,children:"Deletar DATABASE"})})},i=()=>{let[e,a]=(0,r.useState)(null),[t,l]=(0,r.useState)(""),i=async a=>{if(a.preventDefault(),!e){l("Please select a file first");return}let t=new FormData;t.append("file",e);try{let e=await fetch("/api/upload",{method:"POST",body:t});if(e.ok)l("File uploaded successfully");else{let a=await e.text();l("Error: ".concat(a))}}catch(e){l("Error: ".concat(e.message))}};return(0,s.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,s.jsxs)("div",{className:"max-w-md mx-auto p-6 bg-white rounded-lg shadow-md",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Upload Database"}),(0,s.jsxs)("form",{onSubmit:i,className:"space-y-4",children:[(0,s.jsx)("input",{type:"file",onChange:e=>{a(e.target.files[0])},className:"border border-gray-300 p-2 rounded-md"}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(c.ZP,{className:"bg-blue-500 text-white",htmlType:"submit",children:"Upload"}),(0,s.jsx)(o,{})]}),t&&(0,s.jsx)("p",{className:"text-sm text-gray-600",children:t})]})]})})},n=t(16463),d=()=>{let[e,a]=(0,r.useState)(null),[t,l]=(0,r.useState)(""),o=async a=>{if(a.preventDefault(),!e){l("Nenhum arquivo selecionado.");return}if(!e.type.startsWith("image/")){l("Por favor, selecione um arquivo de imagem.");return}let t=new FormData;t.append("image",e);try{let e=await fetch("/api/uploadImg",{method:"POST",body:t});if(!e.ok)throw Error("Erro ao fazer upload da imagem.");let a=await e.json();l(a.message||"Imagem carregada com sucesso.")}catch(e){l(e.message)}},i=async()=>{try{let e=await fetch("/api/uploadImg",{method:"DELETE"});if(!e.ok)throw Error("Erro ao deletar a imagem.");let a=await e.json();l(a.message||"Imagem deletada com sucesso.")}catch(e){l(e.message)}};return(0,s.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,s.jsxs)("div",{className:"max-w-md mx-auto p-6 bg-white rounded-lg shadow-md",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Upload Imagem PNG ATA"}),(0,s.jsxs)("form",{onSubmit:o,className:"space-y-4",children:[(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{a(e.target.files[0])},className:"border border-gray-300 p-2 rounded-md"}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(c.ZP,{className:"bg-green-600 text-white cursor-pointer",htmlType:"submit",children:"Upload"}),(0,s.jsx)(c.ZP,{className:"bg-red-600 text-white cursor-pointer",onClick:i,children:"Deletar Imagem"})]}),t&&(0,s.jsx)("p",{className:"text-sm text-gray-600",children:t})]})]})})};function m(){let{signed:e,loading:a}=(0,r.useContext)(l.V),t=(0,n.useRouter)();return a?(0,s.jsx)("div",{children:"Carregando..."}):e?(0,s.jsx)("div",{className:"container mx-auto p-8 flex justify-center items-center h-screen",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Pagina de importa\xe7\xf5es"}),(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row lg:gap-8",children:[(0,s.jsx)("div",{className:"flex-grow",children:(0,s.jsx)(i,{})}),(0,s.jsx)("div",{className:"flex-grow",children:(0,s.jsx)(d,{})})]})]})}):t.push("/")}}},function(e){e.O(0,[358,54,502,924,648,971,23,744],function(){return e(e.s=32762)}),_N_E=e.O()}]);